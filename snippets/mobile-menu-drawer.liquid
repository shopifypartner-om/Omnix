<style>
  /* Drawer Styling */
  .menu-drawer-wrapper {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    visibility: hidden;
    z-index: 1000;
  }

  .menu-drawer-wrapper.active {
    visibility: visible;
  }

  .menu-drawer-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .menu-drawer-wrapper.active .menu-drawer-overlay {
    opacity: 1;
  }

  .menu-drawer-content {
    position: absolute;
    top: 0;
    left: -100%;
    width: 85%;
    max-width: 400px;
    height: 100%;
    background: #fff;
    transition: left 0.3s ease;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }

  .menu-drawer-wrapper.active .menu-drawer-content {
    left: 0;
  }

  /* Header inside drawer */
  .drawer-header {
    padding: 20px;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: flex-end;
  }

  /* Navigation Links */
  .drawer-nav { padding: 10px 0; }
  .drawer-nav-item { list-style: none; }

  .drawer-link {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 25px;
    text-decoration: none;
    color: #333;
    font-size: 1.6rem;
    font-weight: 500;
    border-bottom: 1px solid #f9f9f9;
    cursor: pointer;
  }

  /* Submenus */
  .drawer-submenu {
    display: none;
    background: #fcfcfc;
    padding-left: 15px;
    list-style: none;
  }

  .drawer-nav-item.open > .drawer-submenu {
    display: block;
  }

  .drawer-icon-caret {
    width: 12px;
    transition: transform 0.3s;
  }

  .drawer-nav-item.open > .drawer-link .drawer-icon-caret {
    transform: rotate(180deg);
  }

  /* Utility Links (Account/Social) */
  .drawer-footer {
    margin-top: auto;
    padding: 20px 25px;
    background: #f5f5f5;
  }

  .drawer-account-link {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    text-decoration: none;
    color: #333;
  }

  .drawer-socials {
    display: flex;
    gap: 15px;
  }

  .drawer-socials svg { width: 20px; height: 20px; fill: currentColor; }
</style>

<div class="menu-drawer-wrapper" id="CustomDrawer">
  <div class="menu-drawer-overlay" onclick="closeDrawer()"></div>
  
  <div class="menu-drawer-content">
    <div class="drawer-header">
      <button onclick="closeDrawer()" style="background:none; border:none; font-size: 30px;">&times;</button>
    </div>

    <nav class="drawer-nav">
      <ul>
        {%- for link in section.settings.menu.links -%}
          <li class="drawer-nav-item">
            {%- if link.links != blank -%}
              <div class="drawer-link" onclick="toggleSubmenu(this)">
                <span>{{ link.title | escape }}</span>
                <svg class="drawer-icon-caret" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5"/></svg>
              </div>
              <ul class="drawer-submenu">
                {%- for childlink in link.links -%}
                  <li class="drawer-nav-item">
                    {%- if childlink.links != blank -%}
                      <div class="drawer-link" onclick="toggleSubmenu(this)" style="font-size: 1.4rem;">
                        <span>{{ childlink.title | escape }}</span>
                        <svg class="drawer-icon-caret" viewBox="0 0 10 6"><path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5"/></svg>
                      </div>
                      <ul class="drawer-submenu">
                        {%- for grandchildlink in childlink.links -%}
                          <li>
                            <a href="{{ grandchildlink.url }}" class="drawer-link" style="font-size: 1.3rem; padding-left: 40px;">
                              {{ grandchildlink.title | escape }}
                            </a>
                          </li>
                        {%- endfor -%}
                      </ul>
                    {%- else -%}
                      <a href="{{ childlink.url }}" class="drawer-link" style="font-size: 1.4rem;">{{ childlink.title | escape }}</a>
                    {%- endif -%}
                  </li>
                {%- endfor -%}
              </ul>
            {%- else -%}
              <a href="{{ link.url }}" class="drawer-link">{{ link.title | escape }}</a>
            {%- endif -%}
          </li>
        {%- endfor -%}
      </ul>
    </nav>

    <div class="drawer-footer">
      {%- if shop.customer_accounts_enabled -%}
        <a href="{{ routes.account_url }}" class="drawer-account-link">
          <svg width="20" height="20" viewBox="0 0 20 20"><path d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08s5.97 1.09 6 3.08c-1.29 1.94-3.5 3.22-6 3.22z" fill="currentColor"/></svg>
          <span>Account</span>
        </a>
      {%- endif -%}
      
    
    </div>
  </div>
</div>

<script>
  function openDrawer() {
    document.getElementById('CustomDrawer').classList.add('active');
    document.body.style.overflow = 'hidden'; // Scroll disable
  }

  function closeDrawer() {
    document.getElementById('CustomDrawer').classList.remove('active');
    document.body.style.overflow = ''; // Scroll enable
  }

  function toggleSubmenu(element) {
    const parent = element.parentElement;
    parent.classList.toggle('open');
  }
</script>