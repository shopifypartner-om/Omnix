<style>
.hero {
  background: rgb(var(--color-background));
}

.hero__container {
  width:100%;
  margin: 0 auto;
}


.hero__slide {
  display: none;
  align-items: center;
  padding: 6rem var(--page-margin);
  min-height: 520px;

  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
}

.hero__slide.is-active {
  display: flex;
}
.hero__slide::before {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.35);
}

.hero__slide::after {
  content: '';
  width: 50%;
}

.hero__content {
  font-family: var(--font-primary--family);
  font-style: var(--font-primary--style);
  font-weight: var(--font-primary--weight);
  width: 50%;          /* SAME as before */
  position: relative;
  z-index: 2;
  padding-left: 50px;
}
.ero__text {
  
  margin: 1.2rem 0 2rem;
  max-width: 42rem;
  color: rgb(var(--color-foreground));
}

.hero__media {
  width: 50%;
  text-align: right;
}
.hero__text,
.hero__content h1 {
  font-family: var(--font-primary--family);
  font-style: var(--font-primary--style);
  font-weight: var(--font-primary--weight);
  color: var(--color-text);
}

.hero__media img {
  max-width: 100%;
  height: auto;
}


/* Navigation */
.hero__nav {
    display: flex;
    justify-content: center;
    gap: 12px;
    padding-bottom: 2rem;
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
} 

.hero__dot {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 1.5px solid transparent; 
  background: transparent;
  position: relative;
  cursor: pointer;
}


/* inner dot */
.hero__dot::after {
  content: '';
  width: 8px;
  height: 8px;
  background: #999;
  border-radius: 50%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* ACTIVE STATE COLOR */
.hero__dot.is-active {
  border-color: var(--dot-color);
}

.hero__dot.is-active::after {
  background: var(--dot-color);
}

/* While dragging */
[data-hero-slider]:active {
  cursor: grab;
}

</style>    


<section class="hero" data-hero-slider>
  <div class="hero__container">

    {% for block in section.blocks %}
      <div class="hero__slide {% if forloop.first %}is-active{% endif %}"
     data-slide
     style="
       {% if block.settings.image %}
         background-image: url('{{ block.settings.image | image_url: width: 2000 }}');
       {% endif %}
     "
     {{ block.shopify_attributes }}>


        <div class="hero__content">
          <h1>{{ block.settings.heading }}</h1>

          <p class="hero__text">
            {{ block.settings.text }}
          </p>


          {% if block.settings.button_label != blank %}
            <a href="{{ block.settings.button_link }}"
               class="button">
              {{ block.settings.button_label }}
            </a>
          {% endif %}
        </div>

        

      </div>
    {% endfor %}

    <!-- Navigation buttons -->
    <div class="hero__nav">
    {% for block in section.blocks %}
    <button
      class="hero__dot {% if forloop.first %}is-active{% endif %}"
      data-dot="{{ forloop.index0 }}"
      style="--dot-color: {{ block.settings.dot_color | default: '#000' }}">
    </button>
    {% endfor %}
    </div>


  </div>
</section>



<script>
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('[data-hero-slider]').forEach(slider => {

    const slides = slider.querySelectorAll('[data-slide]');
    const dots = slider.querySelectorAll('[data-dot]');
    let index = 0;

    const showSlide = (i) => {
      slides.forEach(slide => slide.classList.remove('is-active'));
      dots.forEach(dot => dot.classList.remove('is-active'));

      slides[i].classList.add('is-active');
      dots[i].classList.add('is-active');

      index = i;
    };

    /* ---------- DOT CLICK ---------- */
    dots.forEach(dot => {
      dot.addEventListener('click', () => {
        showSlide(parseInt(dot.dataset.dot));
      });
    });

    /* ---------- DRAG / SWIPE ---------- */
    let startX = 0;
    let isDragging = false;

    const startDrag = (x) => {
      startX = x;
      isDragging = true;
    };

    const endDrag = (x) => {
      if (!isDragging) return;
      const diff = startX - x;

      if (Math.abs(diff) > 50) {
        if (diff > 0) {
          showSlide((index + 1) % slides.length); // next
        } else {
          showSlide((index - 1 + slides.length) % slides.length); // prev
        }
      }
      isDragging = false;
    };

    /* Mouse */
    slider.addEventListener('mousedown', e => startDrag(e.clientX));
    slider.addEventListener('mouseup', e => endDrag(e.clientX));
    slider.addEventListener('mouseleave', () => isDragging = false);

    /* Touch */
    slider.addEventListener('touchstart', e => startDrag(e.touches[0].clientX));
    slider.addEventListener('touchend', e => endDrag(e.changedTouches[0].clientX));

  });
});
</script>




{% schema %}
{
  "name": "Hero Slider",
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Shop the New Collection"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Text"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Shop now"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero Slider"
    }
  ]
}
{% endschema %}

